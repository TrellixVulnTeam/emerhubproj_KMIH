{"remainingRequest":"C:\\Users\\Galib\\emrhb_test\\webapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Galib\\emrhb_test\\webapp\\src\\components\\Userdata.vue?vue&type=script&lang=ts&","dependencies":[{"path":"C:\\Users\\Galib\\emrhb_test\\webapp\\src\\components\\Userdata.vue","mtime":1599483118433},{"path":"C:\\Users\\Galib\\emrhb_test\\webapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Galib\\emrhb_test\\webapp\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Galib\\emrhb_test\\webapp\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\Galib\\emrhb_test\\webapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Galib\\emrhb_test\\webapp\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCB7IENvbXBvbmVudCwgUHJvcCwgVnVlIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7CmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vZmlyZWJhc2UnOwppbXBvcnQgeyBkZWJvdW5jZSB9IGZyb20gJ2RlYm91bmNlJzsKY29uc3QgZG9jUGF0aCA9ICd1c2Vycy91c2VyZGF0YSc7CgpAQ29tcG9uZW50CmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhlbGxvV29ybGQgZXh0ZW5kcyBWdWUgewogIHByaXZhdGUgdXNlcl9pZDogc3RyaW5nID0gIiIKICBwcml2YXRlIG5hbWU6IHN0cmluZyA9ICIiCiAgcHJpdmF0ZSBlbWFpbDogc3RyaW5nID0gIiIKICBwcml2YXRlIGRlcHQ6IHN0cmluZyA9ICIiCiAgcHJpdmF0ZSBwb3NpdGlvbjogc3RyaW5nID0gIiIKICBwcml2YXRlIGZvcm1kYXRhID0ge30KICBwcml2YXRlIHN0YXRlOiBzdHJpbmc9ImxvYWRpbmciCiAgcHJpdmF0ZSBlcnJvck1zZzogc3RyaW5nPSJFcnJvciIKICBwcml2YXRlIHBvaW50czogbnVtYmVyID0gMjAKICBwcml2YXRlIHN0b3JlRGF0YSA9IHt9CiAgcHJpdmF0ZSBzdWJtaXR0ZWQ6IGJvb2xlYW4gPSBmYWxzZQogIHByaXZhdGUgY2FsY3BvaW50czogbnVtYmVyID0gMAogIHByaXZhdGUgZmlyZWJhc2VEYXRhPSBudWxsCgogIHB1YmxpYyBmaXJlc3RvcmUoKSB7CiAgICByZXR1cm4gewogICAgICBmaXJlYmFzZURhdGE6IGRiLmRvYyhkb2NQYXRoKSwKICAgIH07CiAgfQoKICBwdWJsaWMgYXN5bmMgc2F2ZVVzZXIoKSB7CiAgICAgIGF3YWl0IGRiLmRvYyhkb2NQYXRoKS5zZXQoCiAgICAgICAgdGhpcy5mb3JtZGF0YSkudGhlbigKICAgICAgICAgIGRvY1JlZiA9PiB7CiAgICAgICAgdGhpcy5zdGF0ZSA9ICdzeW5jZWQnOwogICAgICAgIHRoaXMuc3RvcmVEYXRhID0gdGhpcy5mb3JtZGF0YTsKCiAgICAgICAgdGhpcy5zdWJtaXR0ZWQgPSB0cnVlOwoKICAgICAgICBjb25zdCBuZXdPYmogPSB0aGlzLmZvcm1kYXRhCiAgICAgICAgY29uc3QgYXJyOiBhbnlbXSA9IFtdOwogICAgICAgIE9iamVjdC52YWx1ZXMobmV3T2JqKS5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgICBpZiAodmFsdWUgIT0gJycpIHsKICAgICAgICAgICAgYXJyLnB1c2godmFsdWUpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGNvbnN0IHZhbHVlcyA9IGFyci5sZW5ndGg7CiAgICAgICAgY29uc3QgY2FsY3VsYXRlZFBvaW50cyA9IHZhbHVlcyp0aGlzLnBvaW50czsKICAgICAgICB0aGlzLmNhbGNwb2ludHMgPSBjYWxjdWxhdGVkUG9pbnRzOwogICAgICAgIH0pCiAgICAgICAgCiAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhZGRpbmcgZGV0YWlsczogJywgZXJyb3IpCiAgICAgICAgdGhpcy5zdGF0ZSA9ICdlcnJvcic7CiAgICB9KQogIH0KCiAgcHVibGljIGFzeW5jIHByZXZEYXRhKCkgewogICAgY29uc3QgZG9jUmVmID0gZGIuZG9jKGRvY1BhdGgpOwogICAgbGV0IGRhdGEgPSAoYXdhaXQgZG9jUmVmLmdldCgpKS5kYXRhKCk7CiAgICBpZighZGF0YSl7CiAgICAgIGRhdGEgPSB7IHVzZXJfaWQ6ICcnLCBuYW1lOiAnJywgZW1haWw6ICcnLCBkZXB0OiAnJywgcG9zaXRpb246ICcnfQogICAgICBkb2NSZWYuc2V0KGRhdGEpCiAgICB9CiAgICB0aGlzLmZvcm1kYXRhID0gZGF0YTsKICAgIHRoaXMuc3RvcmVEYXRhID0geyAuLi5kYXRhIH07CiAgICB0aGlzLnN0YXRlID0gJ3N5bmNlZCc7CgogICAgY29uc3QgbmV3T2JqID0gdGhpcy5mb3JtZGF0YQogICAgY29uc3QgYXJyOiBhbnlbXSA9IFtdOwogICAgT2JqZWN0LnZhbHVlcyhuZXdPYmopLmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHsKICAgICAgaWYgKHZhbHVlICE9ICcnKSB7CiAgICAgICAgYXJyLnB1c2godmFsdWUpOwogICAgICB9CiAgICB9KTsKICAgIGNvbnN0IHZhbHVlcyA9IGFyci5sZW5ndGg7CiAgICBjb25zdCBjYWxjdWxhdGVkUG9pbnRzID0gdmFsdWVzKnRoaXMucG9pbnRzOwogIH0KCiAgLypwdWJsaWMgZGVib3VuY2U8RiBleHRlbmRzICguLi5wYXJhbXM6IGFueVtdKSA9PiB2b2lkPihmbjogRiwgZGVsYXk6IG51bWJlcikgewogIGxldCB0aW1lb3V0SUQ6IG51bWJlciA9IDEwMDA7CiAgcmV0dXJuIGZ1bmN0aW9uKHRoaXM6IGFueSwgLi4uYXJnczogYW55W10pIHsKICAgIHRoaXMuc3RvcmVEYXRhID0gdGhpcy5mb3JtZGF0YTsKICAgIHRoaXMuc2F2ZVVzZXI7CiAgICBjbGVhclRpbWVvdXQodGltZW91dElEKTsKICAgIHRpbWVvdXRJRCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IGZuLmFwcGx5KHRoaXMsIGFyZ3MpLCBkZWxheSk7CiAgICB9IGFzIEY7CiAgfSovCgogIHB1YmxpYyBkZWJvdW5jZWRDaGFuZ2UgPSBkZWJvdW5jZSgKICAgIHRoaXMuc2F2ZVVzZXIKICAgICwgMjAwMCk7CgogIHB1YmxpYyBhc3luYyBhdXRvc2F2ZSgpIHsKICAgIGF3YWl0IGRiLmRvYyhkb2NQYXRoKS5zZXQodGhpcy5mb3JtZGF0YSkudGhlbigKICAgICAgICAgIGRvY1JlZiA9PiB7CiAgICAgICAgdGhpcy5zdGF0ZSA9ICdhdXRvc2F2ZWQnOwogICAgICAgIHRoaXMuc3RvcmVEYXRhID0gdGhpcy5mb3JtZGF0YTsKICAgIH0pCiAgfQoKICBwdWJsaWMgZGF0YVVwZGF0ZSgpIHsKICAgIHRoaXMuc3RhdGUgPSAnYXV0b3NhdmVkJzsKICAgIHNldFRpbWVvdXQodGhpcy5hdXRvc2F2ZSwgMjAwMCkKICB9CgogIHB1YmxpYyBiYWNrVG9PcmlnaW5hbCgpewogICAgdGhpcy5zdGF0ZSA9ICdyZXZva2VkJzsKICAgIHRoaXMuZm9ybWRhdGEgPSB7IC4uLnRoaXMuc3RvcmVEYXRhfQogIH0KCiAgcHVibGljIGNsb3NlKCkgewogICAgdGhpcy5zdWJtaXR0ZWQgPSBmYWxzZTsKICAgIHRoaXMuc3RhdGUgPSAnc3luY2VkJzsKICB9CgogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnByZXZEYXRhKCk7CiAgfQp9Cg=="},{"version":3,"sources":["Userdata.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0JA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Userdata.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<div id=\"app\">\n    <div class=\"flex mb-4\">\n      <div class=\"w-1/2 h-100\">\n        <div class=\"px-6 py-4\">\n          <div class=\"font-bold text-xl mb-2\">User Data</div>\n          <div v-if=\"state === 'synced'\" class=\"text-green-500 text-base\">\n            User Data is synced with Firestore\n          </div>\n          <div v-else-if=\"state === 'changed'\" class=\"text-orange-500 text-base\">\n            There is change in data, it will sync with Firestore\n          </div>\n          <div v-else-if=\"state === 'error'\" class=\"text-red-600 text-base\">\n            Sorry, there is an error while storing data in Firestore\n          </div>\n          <div v-else-if=\"state === 'loading'\" class=\"text-blue-600 text-base\">\n            Data Loading...\n          </div>\n          <div v-else-if=\"state === 'autosaved'\" class=\"text-teal-600 text-base\">\n            Autosaved\n          </div>\n        </div>\n\n  <div v-if=\"submitted === true\" class=\"fixed z-10 inset-0 overflow-y-auto\" id=\"dialog\">\n  <div class=\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\n    <div class=\"fixed inset-0 transition-opacity\">\n      <div class=\"absolute inset-0 bg-gray-500 opacity-75\"></div>\n    </div>\n\n    <span class=\"hidden sm:inline-block sm:align-middle sm:h-screen\"></span>&#8203;\n    \n    <div class=\"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full\" role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"modal-headline\">\n      <div class=\"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4\">\n        <div class=\"sm:flex sm:items-start\">\n          <div class=\"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10\">\n          </div>\n          <div class=\"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left\">\n            <h3 class=\"text-lg leading-6 font-medium text-gray-900\" id=\"modal-headline\">\n              Data Completion Percentage\n            </h3>\n            <div class=\"mt-2\">\n              <p class=\"text-sm leading-5 text-gray-500\">\n                You have completed this much percentage\n              </p>\n              <p class=\"text-center text-lg leading-6 font-medium text-blue-700\">\n                {{ calcpoints }}%\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse\">\n        <span class=\"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto\">\n          <button type=\"button\" @click=\"close\" class=\"inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-green-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-green-500 focus:outline-none focus:border-green-700 focus:shadow-outline-red transition ease-in-out duration-150 sm:text-sm sm:leading-5\">\n            Close\n          </button>\n        </span>\n      </div>\n    </div>\n  </div>\n</div>\n\n  <form @submit.prevent=\"saveUser\" @input=\"dataUpdate\" ref=\"form\" class=\"bg-white px-8 pt-6 pb-8 mb-4\">\n    <div class=\"mb-4\">\n      <label class=\"block text-gray-700 text-sm font-bold mb-2\" for=\"user_id\">\n        User ID\n      </label>\n      <input class=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\" v-model=\"formdata.user_id\" id=\"username\" type=\"text\" placeholder=\"User ID\" required>\n    </div>\n    <div class=\"mb-4\">\n      <label class=\"block text-gray-700 text-sm font-bold mb-2\" for=\"name\">\n        Full Name\n      </label>\n      <input class=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\" v-model=\"formdata.name\" id=\"name\" type=\"text\" placeholder=\"Full Name\" required>\n    </div>\n    <div class=\"mb-4\">\n      <label class=\"block text-gray-700 text-sm font-bold mb-2\" for=\"email\">\n        Email Address\n      </label>\n      <input class=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\" v-model=\"formdata.email\" id=\"email\" type=\"email\" placeholder=\"Email Address\">\n    </div>\n    <div class=\"mb-4\">\n      <label class=\"block text-gray-700 text-sm font-bold mb-2\" for=\"dept\">\n        Department\n      </label>\n      <input class=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\" v-model=\"formdata.dept\" id=\"department\" type=\"text\" placeholder=\"Department\">\n    </div>\n    <div class=\"mb-4\">\n      <label class=\"block text-gray-700 text-sm font-bold mb-2\" for=\"position\">\n        Position\n      </label>\n      <input class=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\" v-model=\"formdata.position\" id=\"position\" type=\"text\" placeholder=\"Position\">\n    </div>\n    <div class=\"flex items-center justify-between\">\n      <button class=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\" type=\"submit\">\n        Save\n      </button>\n      <button class=\"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\" @click=\"backToOriginal\" type=\"submit\">\n        Revert\n      </button>\n    </div>\n    <div class=\"flex justify-center\">\n      <a class=\"inline-block align-baseline font-bold text-sm text-blue-500 hover:text-blue-800\" href=\"/\">\n        Cancel\n      </a>\n    </div>\n  </form>\n      </div>\n      <div class=\"w-1/2 h-screen\">\n\n        <div class=\"px-6 py-4\">\n          <div class=\"font-bold text-xl mb-2\">Store Data</div>\n          <div class=\"text-blue-500 text-base\">\n            Firestore data is displayed here\n          </div>\n        </div>\n        <form ref=\"form\" class=\"bg-white px-8 pt-6 pb-8 mb-4\">\n    <div class=\"mb-4\">\n      <label class=\"block text-gray-700 text-sm font-bold mb-2\" for=\"user_id\">\n        User ID\n      </label>\n      <input class=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\" v-model=\"storeData.user_id\" id=\"username\" type=\"text\" placeholder=\"User ID\" required>\n    </div>\n    <div class=\"mb-4\">\n      <label class=\"block text-gray-700 text-sm font-bold mb-2\" for=\"name\">\n        Full Name\n      </label>\n      <input class=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\" v-model=\"storeData.name\" id=\"name\" type=\"text\" placeholder=\"Full Name\" required>\n    </div>\n    <div class=\"mb-4\">\n      <label class=\"block text-gray-700 text-sm font-bold mb-2\" for=\"email\">\n        Email Address\n      </label>\n      <input class=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\" v-model=\"storeData.email\" id=\"email\" type=\"email\" placeholder=\"Email Address\">\n    </div>\n    <div class=\"mb-4\">\n      <label class=\"block text-gray-700 text-sm font-bold mb-2\" for=\"dept\">\n        Department\n      </label>\n      <input class=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\" v-model=\"storeData.dept\" id=\"department\" type=\"text\" placeholder=\"Department\">\n    </div>\n    <div class=\"mb-4\">\n      <label class=\"block text-gray-700 text-sm font-bold mb-2\" for=\"position\">\n        Position\n      </label>\n      <input class=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\" v-model=\"storeData.position\" id=\"position\" type=\"text\" placeholder=\"Position\">\n    </div>\n  </form>\n      </div>\n    </div>\n</div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { db } from '../firebase';\nimport { debounce } from 'debounce';\nconst docPath = 'users/userdata';\n\n@Component\nexport default class HelloWorld extends Vue {\n  private user_id: string = \"\"\n  private name: string = \"\"\n  private email: string = \"\"\n  private dept: string = \"\"\n  private position: string = \"\"\n  private formdata = {}\n  private state: string=\"loading\"\n  private errorMsg: string=\"Error\"\n  private points: number = 20\n  private storeData = {}\n  private submitted: boolean = false\n  private calcpoints: number = 0\n  private firebaseData= null\n\n  public firestore() {\n    return {\n      firebaseData: db.doc(docPath),\n    };\n  }\n\n  public async saveUser() {\n      await db.doc(docPath).set(\n        this.formdata).then(\n          docRef => {\n        this.state = 'synced';\n        this.storeData = this.formdata;\n\n        this.submitted = true;\n\n        const newObj = this.formdata\n        const arr: any[] = [];\n        Object.values(newObj).forEach(function(value) {\n          if (value != '') {\n            arr.push(value);\n          }\n        });\n        const values = arr.length;\n        const calculatedPoints = values*this.points;\n        this.calcpoints = calculatedPoints;\n        })\n        \n        .catch(error => {\n        console.error('Error adding details: ', error)\n        this.state = 'error';\n    })\n  }\n\n  public async prevData() {\n    const docRef = db.doc(docPath);\n    let data = (await docRef.get()).data();\n    if(!data){\n      data = { user_id: '', name: '', email: '', dept: '', position: ''}\n      docRef.set(data)\n    }\n    this.formdata = data;\n    this.storeData = { ...data };\n    this.state = 'synced';\n\n    const newObj = this.formdata\n    const arr: any[] = [];\n    Object.values(newObj).forEach(function(value) {\n      if (value != '') {\n        arr.push(value);\n      }\n    });\n    const values = arr.length;\n    const calculatedPoints = values*this.points;\n  }\n\n  /*public debounce<F extends (...params: any[]) => void>(fn: F, delay: number) {\n  let timeoutID: number = 1000;\n  return function(this: any, ...args: any[]) {\n    this.storeData = this.formdata;\n    this.saveUser;\n    clearTimeout(timeoutID);\n    timeoutID = window.setTimeout(() => fn.apply(this, args), delay);\n    } as F;\n  }*/\n\n  public debouncedChange = debounce(\n    this.saveUser\n    , 2000);\n\n  public async autosave() {\n    await db.doc(docPath).set(this.formdata).then(\n          docRef => {\n        this.state = 'autosaved';\n        this.storeData = this.formdata;\n    })\n  }\n\n  public dataUpdate() {\n    this.state = 'autosaved';\n    setTimeout(this.autosave, 2000)\n  }\n\n  public backToOriginal(){\n    this.state = 'revoked';\n    this.formdata = { ...this.storeData}\n  }\n\n  public close() {\n    this.submitted = false;\n    this.state = 'synced';\n  }\n\n  created() {\n    this.prevData();\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"scss\">\n</style>"]}]}