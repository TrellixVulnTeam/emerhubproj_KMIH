{"remainingRequest":"C:\\Users\\Galib\\emrhb_test\\webapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Galib\\emrhb_test\\webapp\\src\\components\\Userdata.vue?vue&type=script&lang=ts&","dependencies":[{"path":"C:\\Users\\Galib\\emrhb_test\\webapp\\src\\components\\Userdata.vue","mtime":1599329904663},{"path":"C:\\Users\\Galib\\emrhb_test\\webapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Galib\\emrhb_test\\webapp\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Galib\\emrhb_test\\webapp\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\Galib\\emrhb_test\\webapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Galib\\emrhb_test\\webapp\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCB7IENvbXBvbmVudCwgUHJvcCwgVnVlIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7CmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vZmlyZWJhc2UnOwppbXBvcnQgeyBkZWJvdW5jZSB9IGZyb20gJ2RlYm91bmNlJzsKY29uc3QgZG9jUGF0aCA9ICd1c2Vycy91c2VyZGF0YSc7CgpAQ29tcG9uZW50CmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhlbGxvV29ybGQgZXh0ZW5kcyBWdWUgewogIHByaXZhdGUgdXNlcl9pZDogbnVtYmVyID0gMAogIHByaXZhdGUgbmFtZTogc3RyaW5nID0gIiIKICBwcml2YXRlIGVtYWlsOiBzdHJpbmcgPSAiIgogIHByaXZhdGUgZGVwdDogc3RyaW5nID0gIiIKICBwcml2YXRlIHBvc2l0aW9uOiBzdHJpbmcgPSAiIgogIHByaXZhdGUgZm9ybWRhdGEgPSB7fQogIHByaXZhdGUgc3RhdGU6IHN0cmluZz0ibG9hZGluZyIKICBwcml2YXRlIGVycm9yTXNnOiBzdHJpbmc9IkVycm9yIgogIHByaXZhdGUgcG9pbnRzOiBudW1iZXIgPSAyMAogIHByaXZhdGUgb3JpZ2luYWxEYXRhID0ge30KCiAgcHVibGljIGFzeW5jIHNhdmVVc2VyKCkgewogICAgICBhd2FpdCBkYi5kb2MoZG9jUGF0aCkuc2V0KAogICAgICAgIHRoaXMuZm9ybWRhdGEpLnRoZW4oCiAgICAgICAgICBkb2NSZWYgPT4gewogICAgICAgIHRoaXMuc3RhdGUgPSAnc3luY2VkJzsKICAgICAgICBjb25zdCBrZXlDb3VudCA9IE9iamVjdC5rZXlzKHRoaXMuZm9ybWRhdGEpLmxlbmd0aDsKICAgICAgICBjb25zdCBjYWxjdWxhdGVkUG9pbnRzID0ga2V5Q291bnQqdGhpcy5wb2ludHM7CiAgICAgICAgY29uc29sZS5sb2coJ0RhdGEgQ29tcGxldGVpb24gOiAnKyBjYWxjdWxhdGVkUG9pbnRzICsgJyUnKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWRkaW5nIGRldGFpbHM6ICcsIGVycm9yKQogICAgICAgIHRoaXMuc3RhdGUgPSAnZXJyb3InOwogICAgfSkKICB9CgogIHB1YmxpYyBhc3luYyBwcmV2RGF0YSgpIHsKICAgIGNvbnN0IGRvY1JlZiA9IGRiLmRvYyhkb2NQYXRoKTsKICAgIGxldCBkYXRhID0gKGF3YWl0IGRvY1JlZi5nZXQoKSkuZGF0YSgpOwogICAgaWYoIWRhdGEpewogICAgICBkYXRhID0geyB1c2VyX2lkOiAnJywgbmFtZTogJycsIGVtYWlsOiAnJywgZGVwdDogJycsIHBvc2l0aW9uOiAnJ30KICAgICAgZG9jUmVmLnNldChkYXRhKQogICAgfQogICAgdGhpcy5mb3JtZGF0YSA9IGRhdGE7CiAgICB0aGlzLm9yaWdpbmFsRGF0YSA9IHsgLi4uZGF0YSB9OwogICAgdGhpcy5zdGF0ZSA9ICdzeW5jZWQnOwogIH0KCiAgcHVibGljIGRhdGFVcGRhdGUoKSB7CiAgICB0aGlzLnN0YXRlID0gJ2NoYW5nZWQnOwogICAgLy90aGlzLnNhdmVVc2VyOwogICAgdGhpcy5kZWJvdW5jZWRDaGFuZ2UKICB9CgogIHB1YmxpYyBkZWJvdW5jZTxGIGV4dGVuZHMgKC4uLnBhcmFtczogYW55W10pID0+IHZvaWQ+KGZuOiBGLCBkZWxheTogbnVtYmVyKSB7CiAgbGV0IHRpbWVvdXRJRDogbnVtYmVyID0gMTUwMDsKICByZXR1cm4gZnVuY3Rpb24odGhpczogYW55LCAuLi5hcmdzOiBhbnlbXSkgewogICAgdGhpcy5zYXZlVXNlcjsKICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SUQpOwogICAgdGltZW91dElEID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4gZm4uYXBwbHkodGhpcywgYXJncyksIGRlbGF5KTsKICAgIH0gYXMgRjsKICB9CgogIHB1YmxpYyBkZWJvdW5jZWRDaGFuZ2UgPSBkZWJvdW5jZSh0aGlzLnNhdmVVc2VyLCAxNTAwKTsKCiAgcHVibGljIGJhY2tUb09yaWdpbmFsKCl7CiAgICB0aGlzLnN0YXRlID0gJ3Jldm9rZWQnOwogICAgdGhpcy5mb3JtZGF0YSA9IHsgLi4udGhpcy5vcmlnaW5hbERhdGF9CiAgfQoKICBtb3VudGVkKCkgewogICAgdGhpcy5wcmV2RGF0YSgpOwogIH0KfQo="},{"version":3,"sources":["Userdata.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Userdata.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<div id=\"app\" class=\"bg-blue-500\">\n\n    <div v-if=\"state === 'synced'\">\n      User Data is synced with Firestore\n    </div>\n    <div v-else-if=\"state === 'changed'\">\n      There is change in data, it will sync with Firestore\n    </div>\n    <div v-else-if=\"state === 'error'\">\n      Sorry, there is an error while storing data in Firestore\n    </div>\n    <div v-else-if=\"state === 'loading'\">\n      Data Loading...\n    </div>\n\n    <h3>User Data</h3>\n    <div class=\"row\">\n    <form @submit.prevent=\"saveUser\" @input=\"dataUpdate\" ref=\"form\" class=\"col s12\">\n      <div class=\"row\">\n        <div class=\"input-field col s12\">\n          <input type=\"text\" v-model=\"formdata.user_id\" ref=\"user_id\" id=\"user_id\" required>\n          <label>User ID</label>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"input-field col s12\">\n          <input type=\"text\" v-model=\"formdata.name\" required>\n          <label>Full Name</label>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"input-field col s12\">\n          <input type=\"email\" v-model=\"formdata.email\">\n          <label>Email Address</label>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"input-field col s12\">\n          <input type=\"text\" v-model=\"formdata.dept\">\n          <label>Department</label>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"input-field col s12\">\n          <input type=\"text\" v-model=\"formdata.position\">\n          <label>Position</label>\n        </div>\n      </div>\n      <button type=\"submit\" class=\"btn\">Submit</button>\n      <router-link to=\"/\" class=\"btn grey\">Cancel</router-link>\n    </form>\n    <button @click=\"backToOriginal\">Revert</button>\n    </div>\n</div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { db } from '../firebase';\nimport { debounce } from 'debounce';\nconst docPath = 'users/userdata';\n\n@Component\nexport default class HelloWorld extends Vue {\n  private user_id: number = 0\n  private name: string = \"\"\n  private email: string = \"\"\n  private dept: string = \"\"\n  private position: string = \"\"\n  private formdata = {}\n  private state: string=\"loading\"\n  private errorMsg: string=\"Error\"\n  private points: number = 20\n  private originalData = {}\n\n  public async saveUser() {\n      await db.doc(docPath).set(\n        this.formdata).then(\n          docRef => {\n        this.state = 'synced';\n        const keyCount = Object.keys(this.formdata).length;\n        const calculatedPoints = keyCount*this.points;\n        console.log('Data Completeion : '+ calculatedPoints + '%');\n        })\n        .catch(error => {\n        console.error('Error adding details: ', error)\n        this.state = 'error';\n    })\n  }\n\n  public async prevData() {\n    const docRef = db.doc(docPath);\n    let data = (await docRef.get()).data();\n    if(!data){\n      data = { user_id: '', name: '', email: '', dept: '', position: ''}\n      docRef.set(data)\n    }\n    this.formdata = data;\n    this.originalData = { ...data };\n    this.state = 'synced';\n  }\n\n  public dataUpdate() {\n    this.state = 'changed';\n    //this.saveUser;\n    this.debouncedChange\n  }\n\n  public debounce<F extends (...params: any[]) => void>(fn: F, delay: number) {\n  let timeoutID: number = 1500;\n  return function(this: any, ...args: any[]) {\n    this.saveUser;\n    clearTimeout(timeoutID);\n    timeoutID = window.setTimeout(() => fn.apply(this, args), delay);\n    } as F;\n  }\n\n  public debouncedChange = debounce(this.saveUser, 1500);\n\n  public backToOriginal(){\n    this.state = 'revoked';\n    this.formdata = { ...this.originalData}\n  }\n\n  mounted() {\n    this.prevData();\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"scss\">\n</style>"]}]}